<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Carthage Newsletter</title>

<style>
  :root{
    --bg: #F7F4EB;
    --text: #111111;
    --border: #111111;
    --button-bg: #2b0f0f;
    --button-text: #ffffff;
    --radius: 999px;
    --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
  }

  html,body{
  margin:0;
  padding:0;
  background:#F7F4EB !important;
  background-color:#F7F4EB !important;
  color:var(--text);
  font-family:var(--font)
}

  .wrap{padding:8px;display:inline-block}

  form{
    display:flex;
    align-items:center;
    gap:18px;
  }

  input[type="email"]{
    -webkit-text-fill-color: var(--text);
    width:260px;
    height:44px;
    padding:0 18px;
    border:1.5px solid var(--border);
    border-radius:var(--radius);
    outline:none;
    background:transparent;
    font-size:14px;
    line-height:44px;
    box-sizing:border-box;
    color:var(--text);
  }

  input[type="email"]::placeholder{color:rgba(17,17,17,0.65)}
  input[type="email"]:focus{box-shadow:0 0 0 3px rgba(43,15,15,0.12)}

  button{
    height:44px;
    padding:0 22px;
    border:0;
    border-radius:var(--radius);
    background:var(--button-bg);
    color:var(--button-text);
    font-size:14px;
    font-weight:600;
    cursor:pointer;
    white-space:nowrap;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    min-width:220px;
  }

  button:hover{filter:brightness(1.05)}
  button:active{transform:translateY(1px)}
  button:focus{outline:none;box-shadow:0 0 0 3px rgba(43,15,15,0.18)}
  button[disabled]{opacity:.75;cursor:not-allowed;transform:none}

  .status{margin-top:10px;font-size:13px;line-height:1.35}
  .status.ok{color:rgba(17,17,17,0.85)}
  .status.err{color:#8b0000}
</style>
</head>

<body>
  <div class="wrap">
    <!-- IMPORTANT: action is # so the browser can never navigate to Apps Script -->
    <form id="newsletterForm" action="#" method="POST" novalidate>
      <input id="email" type="email" name="email" placeholder="Enter your email" autocomplete="email" required />
      <button id="submitBtn" type="submit">Subscribe to Newsletter</button>
    </form>

    <div id="status" class="status" aria-live="polite"></div>
  </div>

<script>
  // REPLACE THIS with your deployed Apps Script Web App URL:
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxmwdpAReplnNnCDTwhvOlLWsfYQ-eO8AO3S6u7-nzk-vuA4FBFn_Awm_oTG1TBDedjmQ/exec";

  const form = document.getElementById('newsletterForm');
  const btn = document.getElementById('submitBtn');
  const emailInput = document.getElementById('email');
  const statusEl = document.getElementById('status');

  const DEFAULT_BTN_TEXT = 'Subscribe to Newsletter';

  function setStatus(msg, kind) {
    statusEl.textContent = msg || '';
    statusEl.className = 'status' + (kind ? ` ${kind}` : '');
  }

  function isValidEmail(email){
    return /^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email);
  }

  form.addEventListener('submit', async (e) => {
    e.preventDefault(); // prevents ALL navigation
    setStatus('');

    const email = (emailInput.value || '').trim().toLowerCase();
    if (!isValidEmail(email)) {
      setStatus('Please enter a valid email address.', 'err');
      return;
    }

    btn.disabled = true;
    const prevText = btn.textContent;
    btn.textContent = 'Submitting…';

    try {
      const data = new FormData();
      data.append('email', email);

      await fetch(WEB_APP_URL, {
        method: 'POST',
        mode: 'no-cors',
        body: data,
      });

      btn.textContent = 'Subscribed ✓';
      setStatus('Thanks! You’re subscribed.', 'ok');
      emailInput.value = '';

      setTimeout(() => {
        btn.textContent = DEFAULT_BTN_TEXT;
        btn.disabled = false;
        setStatus('');
      }, 3500);

    } catch (err) {
      btn.disabled = false;
      btn.textContent = prevText || DEFAULT_BTN_TEXT;
      setStatus('Sorry — something went wrong. Please try again.', 'err');
      console.error(err);
    }
  });
</script>
</body>
</html>
